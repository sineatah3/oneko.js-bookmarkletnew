javascript:(function(){if(window.__onekoActive){window.__onekoActive=!1,cancelAnimationFrame(window.__onekoFrameId);try{window.__onekoEl.remove()}catch(a){}try{window.__onekoMenu.remove()}catch(a){}try{window.__onekoMenuTab&&window.__onekoMenuTab.remove()}catch(a){}(window.__onekoBorders||[]).forEach(a=>{try{a.remove()}catch(a){}});window.__onekoHandlers&&window.__onekoHandlers.forEach(a=>window.removeEventListener(a.ev,a.fn));try{window.__onekoFish&&window.__onekoFish.remove()}catch(a){}try{window.__onekoScore&&window.__onekoScore.remove()}catch(a){}return window.__onekoEl=null,window.__onekoMenu=null,window.__onekoMenuTab=null,window.__onekoHandlers=null,window.__onekoBorders=null,void(window.__onekoActive=!1)}window.__onekoActive=!0;const r=32,s=48/32,t="https://raw.githubusercontent.com/sineatah3/oneko.js-bookmarkletnew/main/assets/oneko/oneko-",u=48,v=.14,w=100,x=.6,y=-.45,z=-.6,A=-.6,B={idle:[[-3,-3]],alert:[[-7,-3]],N:[[-1,-2],[-1,-3]],NE:[[0,-2],[0,-3]],E:[[-3,0],[-3,-1]],SE:[[-5,-1],[-5,-2]],S:[[-6,-3],[-7,-2]],SW:[[-5,-3],[-6,-1]],W:[[-4,-2],[-4,-3]],NW:[[-1,0],[-1,-1]],black:[[-1,0],[-1,-1]]};let C=innerWidth/2,D=innerHeight/2,E=C,F=D,G=0,H=0,I=!1,J={},K=Date.now(),L=0,M=0,N="follow",O="classic",P=!1;const Q=[];window.__onekoHandlers=Q;const R=[];window.__onekoBorders=R;let S={ArrowUp:!1,ArrowDown:!1,ArrowLeft:!1,ArrowRight:!1};const T=.9,U=18,V=.88;let W=null,X=0,Y=0,Z=40,$=0,_=null,aa=1,ba="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgCAMAAAC8EZcfAAAAJFBMVEX///9rn5NahnytvttDZV0eLCk5VE5ueYuCkKVTXGkgIygAAADfyb/5AAABBUlEQVR4nO3ZQXLCMAxA0VCglPb+9+1OGmY0KVRNscP7S3nht9M4WRZJkibqGH1EzzbdBNgNsBtgN8BuUwJz9mzdAtgPsBtgN8BuwwOTdYmuRYCAgICAewYei/L0LTpEOTsVibkUAQICAgLuD1ixKsL67D36XA0QEBAQcM/Ax1k5y1X3CwIgICAg4NTAv2HlqgMEBAQEfA3gvYTqSZUf05J1jgABAQEBXwN4L6v6GZOsDZ9KgICAgIBDAg9F69ScVawNNzAgICAg4ODAr2gAFiAgICDghMCqJPwzCxAQEBBwGmBeclrtXLQhCxAQEBBwGmBFHQBTBdgNsBtgN8BuwwMlSfqhb2/0jKHFfD7kAAAAAElFTkSuQmCC";let speedMultiplier=1;function k(){_||(_=document.createElement("div"),_.id="__oneko_score",_.style.position="fixed",_.style.left="8px",_.style.top="8px",_.style.padding="6px 8px",_.style.background="rgba(0,0,0,0.6)",_.style.color="#fff",_.style.borderRadius="6px",_.style.zIndex=2147483647,_.style.fontFamily="sans-serif",_.style.fontSize="13px",_.textContent="Fish: "+$,document.body.appendChild(_),window.__onekoScore=_)}function j(){i(),$++,_&&(_.textContent="Fish: "+$),p(),setTimeout(()=>{"car"===N&&g()},700)}function f(c,f=100){return new Promise(g=>{const i=new Image;i.onload=()=>{var j=Math.round;try{function k(a,b){const c=4*(Math.floor(b)*l+Math.floor(a));return[o[c],o[c+1],o[c+2]]}const l=i.naturalWidth,m=i.naturalHeight,h=document.createElement("canvas");h.width=l,h.height=m;const c=h.getContext("2d");c.drawImage(i,0,0);const n=c.getImageData(0,0,l,m),o=n.data,d=[];d.push(k(1,1)),d.push(k(l-2,1)),d.push(k(1,m-2)),d.push(k(l-2,m-2));let p=0,q=0,t=0;d.forEach(a=>{p+=a[0],q+=a[1],t+=a[2]}),p=j(p/d.length),q=j(q/d.length),t=j(t/d.length);const s=Math.max(40,Math.min(160,f));for(let c=0;c<o.length;c+=4){const d=o[c],e=o[c+1],f=o[c+2],b=o[c+3],a=d-p,g=e-q,h=f-t,i=Math.sqrt(a*a+g*g+h*h);if(0<b&&i<=s){const a=i/s;o[c+3]=j(b*a)}}c.putImageData(n,0,0),g(h.toDataURL("image/png"))}catch(a){g(c)}},i.onerror=()=>g(c),i.crossOrigin="Anonymous",i.src=c})}function g(){if(!W){W=document.createElement("div"),W.id="__oneko_fish",W.style.position="fixed",W.style.width="40px",W.style.height="40px",W.style.left="0px",W.style.top="0px",W.style.zIndex=2147483646,W.style.background="transparent",W.style.pointerEvents="none";{const a=document.createElement("img");a.alt="fish",a.style.width="100%",a.style.height="100%",a.style.display="block",a.style.objectFit="contain",a.style.imageRendering="pixelated",a.style.background="transparent",a.style.backgroundColor="transparent",a.style.border="0",W.appendChild(a),document.body.appendChild(W),window.__onekoFish=W,f(ba).then(b=>{try{a.src=b}catch(a){}})}h()}}function h(){const a=30;for(let b=0;b<a;b++){const a=Math.random()*(innerWidth-Z-40)+20,b=Math.random()*(innerHeight-Z-40)+20;let c=!1;try{if("undefined"!=typeof ea&&ea){const d=ea.getBoundingClientRect(),e=a-20,f=a+20,g=b-20,h=b+20;f<d.left||e>d.right||h<d.top||g>d.bottom||(c=!0)}}catch(a){c=!1}if(!c){X=a,Y=b;break}X=a,Y=b}W&&(W.style.left=X-20+"px",W.style.top=Y-20+"px")}function i(){if(W){try{W.remove()}catch(a){}W=null,window.__onekoFish=null}}function l(){i(),_&&(_=null,window.__onekoScore=null),$=0}function m(a,b,c,e,f){const g=document.createElement("div");return g.style.position="fixed",g.style.top=a,g.style.left=b,g.style.width=c,g.style.height=e,g.style.background=f,g.style.zIndex=2147483646,document.body.appendChild(g),R.push(g),g}function n(a,b,c=document){c.addEventListener(a,b),Q.push({ev:a,fn:b,el:c})}function o(a,c){const d=document.createElement("button");return d.textContent=a,d.style.padding="4px 6px",d.style.cursor="pointer",d.style.border="none",d.style.borderRadius="4px",d.style.background="#333",d.style.color="#fff",d.onclick=c,d}function c(a,b){const c=B[a]||B.idle,d=c[b%c.length];da.style.backgroundPosition=d[0]*r+"px "+d[1]*r+"px"}function d(b,c){const d=180*Math.atan2(c,b)/Math.PI;return-22.5<=d&&22.5>d?"E":22.5<=d&&67.5>d?"SE":67.5<=d&&112.5>d?"S":112.5<=d&&157.5>d?"SW":157.5<=d||-157.5>d?"W":-157.5<=d&&-112.5>d?"NW":-112.5<=d&&-67.5>d?"N":"NE"}function p(){for(let a=0;22>a;a++){const a=document.createElement("div");a.style.width="7px",a.style.height="7px",a.style.background=["#f44336","#ffeb3b","#2196f3","#4caf50","#9c27b0"][Math.floor(5*Math.random())],a.style.position="fixed",a.style.left=Math.random()*innerWidth+"px",a.style.top="0px",a.style.zIndex=2147483646,document.body.appendChild(a);let b=0;const c=()=>{if(b+=3+3*Math.random(),a.style.top=b+"px",b>innerHeight)try{a.remove()}catch(a){}else requestAnimationFrame(c)};c()}}function q(e){var f=Math.abs,h=Math.sin,i=Math.cos,l=Math.hypot;const m=Math.min(40,e-na);na=e;const n=C,o=D,r=16*aa;if(!I)if("follow"===N){const a=E-C,b=F-D,c=l(a,b);if(c>u){const d=E-a/c*u,e=F-b/c*u;C+=(d-C)*v*speedMultiplier,D+=(e-D)*v*speedMultiplier}}else if("drift"===N)G+=.001*(E-C)*m*speedMultiplier,H+=.001*(F-D)*m*speedMultiplier,G*=.92,H*=.92,C+=G*(m/16),D+=H*(m/16);else if("orbit"===N){const a=e/1e3*speedMultiplier,b=E+i(1.4*a)*w,c=F+h(1.4*a)*w;C+=.28*(b-C),D+=.28*(c-D)}else if("physics"===N)H+=x*(m/16)*speedMultiplier,C+=G*(m/16),D+=H*(m/16),D>innerHeight-r&&(D=innerHeight-r,H*=P?0:y);else if("dvd"===N){ia+=.012*ja*speedMultiplier,ia=Math.min(Math.max(1,ia),1.9),C+=la*(m/16)*speedMultiplier,D+=ma*(m/16)*speedMultiplier;let c=!1;(C<r||C>innerWidth-r)&&(la*=-1,ja*=-1,c=!0),(D<r||D>innerHeight-r)&&(ma*=-1,ka*=-1,c=!0),c&&p()}else if("car"===N){W||(g(),k());const a=((S.ArrowRight?1:0)-(S.ArrowLeft?1:0))*T*speedMultiplier,b=((S.ArrowDown?1:0)-(S.ArrowUp?1:0))*T*speedMultiplier;G+=a*(m/16),H+=b*(m/16);const c=l(G,H);if(c>U*speedMultiplier){const a=U*speedMultiplier/c;G*=a,H*=a}if(G*=V,H*=V,C+=G*(m/16),D+=H*(m/16),C<r&&(C=r,G*=z),C>innerWidth-r&&(C=innerWidth-r,G*=z),D<r&&(D=r,H*=A),D>innerHeight-r&&(D=innerHeight-r,H*=y),W){const a=C-X,b=D-Y;l(a,b)<r+20&&j()}}C<r&&(C=r,G*=z),C>innerWidth-r&&(C=innerWidth-r,G*=z),D<r&&(D=r,H*=A),D>innerHeight-r&&(D=innerHeight-r,H*=y);const t=C-n,J=D-o,K=l(t,J);let O="idle";O=I?"alert":"physics"===N&&1<f(H)?"tired":.6<K?d(t,J):"idle",M+=m;let Q=2<K?50:1<K?90:180;"physics"===N&&(Q*=1.6),M>Q&&(M=0,L=(L+1)%(B[O]||B.idle).length),c(O,L),da.style.left=C-16+"px",da.style.top=D-16+"px",da.style.transform="scale("+s*("dvd"===N?ia:1)*aa+")",window.__onekoFrameId=requestAnimationFrame(q)}m("0","0","100%","16px","rgba(255,0,0,0.08)"),m("0","0","16px","100%","rgba(0,255,0,0.04)");const ca=m("0","","16px","100%","rgba(0,0,255,0.04)");ca.style.right="0";const da=document.createElement("div");da.id="__oneko_el",da.style.position="fixed",da.style.width="32px",da.style.height="32px",da.style.left=C-16+"px",da.style.top=D-16+"px",da.style.zIndex=2147483647,da.style.imageRendering="pixelated",da.style.pointerEvents="auto",da.style.cursor="grab",da.style.transform="scale(1.5)",da.style.transformOrigin="center",da.style.backgroundImage=`url(${t+O}.gif)`,da.style.backgroundRepeat="no-repeat",document.body.appendChild(da),window.__onekoEl=da;const ea=document.createElement("div");ea.id="__oneko_menu",ea.style.position="fixed",ea.style.top="8px",ea.style.right="8px",ea.style.background="rgba(18,18,18,0.96)",ea.style.color="#fff",ea.style.padding="8px",ea.style.borderRadius="8px",ea.style.fontFamily="sans-serif",ea.style.zIndex=2147483647,ea.style.display="flex",ea.style.flexDirection="column",ea.style.gap="6px",ea.style.minWidth="170px",document.body.appendChild(ea),window.__onekoMenu=ea;const fa=document.createElement("div");fa.style.display="flex",fa.style.flexWrap="wrap",fa.style.gap="6px",["follow","drift","orbit","physics","dvd","car"].forEach(a=>{const c=o(a,()=>{N=a,G=H=0,ia=1,ja=1,ka=1,Array.from(fa.children).forEach(a=>a.style.background="#333"),c.style.background="#444","car"===a?(g(),k()):l()});a===N&&(c.style.background="#444"),fa.appendChild(c)}),ea.appendChild(fa);const ga=document.createElement("div");ga.style.display="flex",ga.style.gap="6px";const CAT_SPRITES={"classic":{url:`${t}classic.gif`,isGif:!0},"vaporwave":{url:`${t}vaporwave.gif`,isGif:!0},"maia":{url:`${t}maia.gif`,isGif:!0},"black":{url:"https://raw.githubusercontent.com/sineatah3/oneko.js-bookmarkletnew/refs/heads/main/assets/oneko/oneko-black.png",isGif:!1},"blue":{url:"https://raw.githubusercontent.com/sineatah3/oneko.js-bookmarkletnew/refs/heads/main/assets/oneko/oneko-royalblue.png",isGif:!1},"radioactive":{url:"https://raw.githubusercontent.com/sineatah3/oneko.js-bookmarkletnew/refs/heads/main/assets/oneko/oneko-radioactive.png",isGif:!1}};Object.keys(CAT_SPRITES).forEach(function(catName){const catData=CAT_SPRITES[catName],b=document.createElement("div");b.title=catName,b.style.width="40px",b.style.height="40px",b.style.borderRadius="6px",b.style.cursor="pointer",b.style.backgroundImage=catData.isGif?`url(${catData.url})`:`url(${catData.url})`+`, url(${t}${catName}.gif)`,b.style.backgroundSize="cover",b.style.border="2px solid transparent",b.onclick=()=>{O=catName;const newUrl=CAT_SPRITES[O].url;da.style.backgroundImage=CAT_SPRITES[O].isGif?`url(${newUrl})`:`url(${newUrl})`,Array.from(ga.children).forEach(a=>a.style.border="2px solid transparent"),b.style.border="2px solid #888"},ga.appendChild(b)}),ea.appendChild(ga),(function(){function a(){c?(ea.style.display="none",b.style.right="8px",b.textContent="▶"):(ea.style.display="flex",b.style.right=ea.getBoundingClientRect().width+16+"px",b.textContent="≡")}const b=document.createElement("div");b.id="__oneko_menu_tab",b.style.position="fixed",b.style.top="8px",b.style.right="8px",b.style.width="30px",b.style.height="30px",b.style.zIndex=2147483648,b.style.display="flex",b.style.alignItems="center",b.style.justifyContent="center",b.style.cursor="pointer",b.style.borderRadius="6px",b.style.background="rgba(0,0,0,0.6)",b.style.color="#fff",b.textContent="≡",b.title="Toggle oneko menu",document.body.appendChild(b),window.__onekoMenuTab=b;let c=!1;b.addEventListener("click",()=>{c=!c,a()}),a()})(),ea.appendChild(ga);const ha=o("Physics: bouncy",()=>{P=!P,ha.textContent="Physics: "+(P?"sticky":"bouncy")});ha.style.marginTop="6px",ea.appendChild(ha);let ia=1,ja=1,ka=1,la=3,ma=2,na=performance.now();n("mousemove",a=>{if(E=a.clientX,F=a.clientY,K=Date.now(),I){const b=performance.now(),c=a.clientX-J.lastX,d=a.clientY-J.lastY,e=b-J.lastT||16;G=c/(e/16),H=d/(e/16),J.lastX=a.clientX,J.lastY=a.clientY,J.lastT=b,C=J.startCX+(a.clientX-J.startClientX),D=J.startCY+(a.clientY-J.startClientY)}}),n("mousedown",a=>{a.target!==da||0!==a.button||(I=!0,da.style.cursor="grabbing",J.startClientX=a.clientX,J.startClientY=a.clientY,J.startCX=C,J.startCY=D,J.lastX=a.clientX,J.lastY=a.clientY,J.lastT=performance.now())},da),n("mouseup",()=>{I&&(I=!1,da.style.cursor="grab")}),n("keydown",a=>{if(S.hasOwnProperty(a.key)&&(S[a.key]=!0,"car"===N&&a.preventDefault()),"Escape"===a.key){cancelAnimationFrame(window.__onekoFrameId);try{da.remove()}catch(a){}try{ea.remove()}catch(a){}(window.__onekoBorders||[]).forEach(a=>{try{a.remove()}catch(a){}});window.__onekoHandlers&&window.__onekoHandlers.forEach(a=>window.removeEventListener(a.ev,a.fn)),l(),window.__onekoEl=null,window.__onekoMenu=null,window.__onekoHandlers=null,window.__onekoBorders=null,window.__onekoActive=!1}}),n("keyup",a=>{S.hasOwnProperty(a.key)&&(S[a.key]=!1,"car"===N&&a.preventDefault())}),window.__onekoHandlers=Q,window.__onekoMenu=ea,window.__onekoEl=da,window.__onekoBorders=R,na=performance.now(),window.__onekoFrameId=requestAnimationFrame(q),(function(){const a=document.createElement("div");a.style.display="flex",a.style.alignItems="center",a.style.gap="6px",a.style.marginTop="6px";const b=document.createElement("div");b.textContent="Size:",b.style.color="#ddd",b.style.fontSize="13px",b.style.marginRight="6px",a.appendChild(b);const c=[1,1.25,1.5,2,3];c.forEach(c=>{const d=o((c%1?c+"":c+"")+"x",()=>{aa=c,Array.from(a.querySelectorAll("button")).forEach(a=>a.style.background="#333"),d.style.background="#444"});d.style.padding="4px 6px",1===c&&(d.style.background="#444"),a.appendChild(d)}),ea.appendChild(a)})(),(function(){const a=document.createElement("div");a.style.display="flex",a.style.alignItems="center",a.style.gap="6px",a.style.marginTop="6px";const b=document.createElement("div");b.textContent="Speed:",b.style.color="#ddd",b.style.fontSize="13px",b.style.marginRight="6px",a.appendChild(b);const c=[0.25,0.5,0.75,1,1.5,2,3];c.forEach(c=>{const d=o(c+"x",()=>{speedMultiplier=c,Array.from(a.querySelectorAll("button")).forEach(a=>a.style.background="#333"),d.style.background="#444"});d.style.padding="4px 6px",1===c&&(d.style.background="#444"),a.appendChild(d)}),ea.appendChild(a)})()})()
